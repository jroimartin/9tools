#!/usr/local/plan9/bin/rc

if(! ~ $#* 1) {
	echo 'usage: ghweb <#pr|issue>' >[1=2]
	exit usage
}

if(! git remote >[2] /dev/null | 9 grep origin > /dev/null) {
	echo 'ghweb: cannot find origin remote' >[1=2]
	exit origin
}

# remote formats:
#   https://hostname/user/repo.git
#   git@hostname:user/repo.git

repo=`{git remote get-url origin | 9 sed 's,^.+?(://|@)(.+?/.+?)(\.git)?.+?$,\2,' | 9 sed 's,:,/,'}
9 web 'https://'$repo'/issues/'$1
